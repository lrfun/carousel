<!DOCTYPE html>
<html>
<head>
    <title>轮播</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/style.css" /> 
</head>
<body>
	<div class="container">
	  	<ul class="imgBox clearfix">
		  <li><img src="./images/1.jpg" alt=""></li>
		  <li><img src="./images/2.jpg" alt=""></li>
		  <li><img src="./images/3.jpg" alt=""></li>
		  <li><img src="./images/4.jpg" alt=""></li>
		  <li><img src="./images/5.jpg" alt=""></li>
		</ul>
		 <div class="page clearfix">
		  	<span class="prev btn" data-id="pre" ></span>
		  	<span class="next btn" data-id="next"></span>
		  </div>

		   <div class="page1">
		  	<span class="prev_dian cur" data-id="0"></span>
		  	<span class="prev_dian" data-id="1"></span>
        <span class="prev_dian" data-id="2"></span>
        <span class="prev_dian" data-id="3"></span>
        <span class="prev_dian" data-id="4"></span>
		  </div>
	</div>
	 

</body>
</html>


<script type="text/javascript">
var vwidth=$(".imgBox li").width();
var index=0;
var theInt=null;
var num=$('.imgBox li').length;
$(".prev_dian").eq(index).addClass("cur");
$(".btn").each(function(){
  $(this).click(function(){
    var pi=$(this).attr("data-id");
    if(pi=="pre"){
      index--;
      if(index<0){
        index=num-1;
      };      
      scrolling();
      change();
      
      return false
    };
    if(pi=="next"){
      index++;
      if(index>num-1){
        index=0;
      }      
      scrolling();
      change();     
      return false
    }
  })
});
$(".prev_dian").each(function(){
  $(this).click(function(){
    var kolid=$(this).attr("data-id");
    index=kolid;
    scrolling();
    change();    
  })
})

function scrolling() {
    clearInterval(theInt);
    theInt = setInterval(function () {
        index++;
        if (index < num) {
            change();
        } else {
            index = 0;
            change();
        }
    }, 5000);
};
scrolling(-1);

function change(){
  var idleft=index*vwidth;
  $(".container .imgBox").animate({marginLeft:-idleft},500);
  $(".prev_dian").removeClass("cur").eq(index).addClass("cur"); 
}
</script>
